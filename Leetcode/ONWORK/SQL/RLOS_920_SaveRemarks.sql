	<sql-query name="getArchivedJournalListByApplicationId" resultset-ref="archivedJournal.list">
	<![CDATA[
		SELECT 
			WF.TASK_ID,
			CASE
				WHEN WF.USER_ID IS NULL THEN '[' || RL.NAME || '] (Pools)'
				ELSE (SELECT SURNAME || ' ' || NVL(FIRST_NAME, '') AS NAME FROM LOS_USER WHERE ID = WF.USER_ID)
		      END AS ORIGINATOR, 
			CASE
		        WHEN WF.ASSG_TO_USER_ID IS NULL AND WF.TASK_STATUS != '0' THEN '[' || RLS.NAME || '] (Pools)'
		        ELSE (SELECT SURNAME || ' ' || NVL(FIRST_NAME, '') AS NAME FROM LOS_USER WHERE ID = WF.ASSG_TO_USER_ID)
		      END AS RECIPIENT,
			CASE
				WHEN WF.USER_ACTION_DSCP like '%Return%' THEN 'Return'
				ELSE TO_CHAR(WF.USER_ACTION_DSCP)
			END AS DECISION,
			CASE
				WHEN WF.USER_ACTION like '%Return%' THEN 'Returned'
				ELSE TO_CHAR(WF.APP_STATUS)
			END AS STATUS,
			WF.TASK_SEQ AS TASK_SEQ,
			WF.TASK_STATUS AS TASK_STATUS,
			WF.COMPLETE_DATE AS TRANSACTION_TIME,
			WF.USER_REMARK AS REMARKS,
			COMMON_CODE_CATEGORY_ENTRY.ENTRY_NAME AS RSN_CODE,
			--RSN.RSN_CODE,
			RSN.INTERNAL_DESCRIPTION,
			RSN.EXTERNAL_DESCRIPTION
		FROM LOS_WF_TASK_ARCHIVED WF
		INNER JOIN 
		    (
                SELECT DISTINCT TO_NUMBER(ENTRY_CODE) AS ID , ENTRY_NAME AS NAME
                FROM COMMON_CODE_CATEGORY_ENTRY 
                WHERE CATEGORY_CODE = 'LOS_ROLE_ACCESS' AND ACTIVE_STATUS = '1'
            ) RL ON WF.ROLETYPE_ID = RL.ID
		LEFT JOIN
		    (
                SELECT DISTINCT TO_NUMBER(ENTRY_CODE) AS ID , ENTRY_NAME AS NAME
                FROM COMMON_CODE_CATEGORY_ENTRY 
                WHERE CATEGORY_CODE = 'LOS_ROLE_ACCESS' AND ACTIVE_STATUS = '1'
            ) RLS ON WF.ASSG_TO_ROLE_ID = RLS.ID
		LEFT JOIN LOS_RSN RSN ON RSN.TASK_ID = WF.TASK_ID
		LEFT JOIN COMMON_CODE_CATEGORY_ENTRY ON RSN.REASON_GROUP = COMMON_CODE_CATEGORY_ENTRY.ENTRY_CODE AND COMMON_CODE_CATEGORY_ENTRY.CATEGORY_CODE = 'REASON_GROUP'
		WHERE WF.APP_ID = :application_id
		ORDER BY WF.TASK_ID
	]]>
	</sql-query>

    

SELECT * FROM CMS_FUNCTION_ACCESS ;

SELECT ID, REMARKS FROM LOS_CA  WHERE ID = 122523366333333;

SELECT * FROM LOS_CA WHERE APP_REF_NO = '94098PL19000167'; 

SELECT ID, REMARKS FROM LOS_CA WHERE APP_REF_NO = '94098PL19000167'; 

SELECT ID, REMARKS FROM LOS_CA WHERE ID = '20190531003164'; 

SELECT wf.USER_REMARK, wf.* FROM LOS_WF_TASK_ARCHIVED wf WHERE wf.user_remark IS NOT NULL;
SELECT ID, REMARKS FROM LOS_CA WHERE remarks IS NOT NULL ;
--20190531003164	1314223
--20190619003227	TEST 12342 21 51 923 2020 d 2e *!@#!@$12

-- user id 20181006000652 


SELECT wf.USER_REMARK, wf.*  FROM LOS_WF_TASK_ARCHIVED wf WHERE TASK_ID = 20190531009336 ;
UPDATE LOS_WF_TASK_ARCHIVED SET USER_ID = '20181006000652' WHERE TASK_ID = 20190531009336 ;
COMMIT ;


LOS_CA :   REMARKS	NVARCHAR2(500 CHAR)
LOS_WF_TASK_ARCHIVED :   USER_REMARK	NVARCHAR2(2000 CHAR)	Yes		11	user remark

SELECT ID, REMARKS FROM LOS_CA WHERE APP_REF_NO = '94098CC19000192'; 
    INSERT INTO CMS_FUNCTION_ACCESS values (20230518000001 ,Trim('CAAction'), Trim('save_remark'), 109);
	INSERT INTO CMS_FUNCTION_ACCESS values (20230518000002 ,Trim('CAAction'), Trim('save_remark'), 100);
	INSERT INTO CMS_FUNCTION_ACCESS values (20230518000003 ,Trim('CAAction'), Trim('save_remark'), 101);
	INSERT INTO CMS_FUNCTION_ACCESS values (20230518000004 ,Trim('CAAction'), Trim('save_remark'), 104);
COMMIT ;

12498CC23000033 AP REF NO
SELECT * FROM LOS_CA WHERE APP_REF_NO = '12498CC23000033'; 


The application with Reference No : 12498CC18001566
is Aborted < End State > .



	12498CC18001585 	NGUYEN NGUYEN VAN X  	1320000023933 	27/12/2018 15:44:27	27/12/2018 15:46:50	At Branch Checker  	VTB.RLOS.01 	- 	- 

	SELECT * FROM LOS_USER WHERE LOGIN_NAME LIKE '%MAK%';

SELECT * FROM LOS_USER ;
SELECT * FROM LOS_USER_ROLE WHERE ROLE_ID = 102;
SELECT * FROM LOS_USER_ROLE WHERE user_id = 20180823000013	; -- TRANGSYS02
    --20180823000023	16	20180823000013	ACTIVE
UPDATE LOS_USER_ROLE SET ROLE_ID = 101 WHERE ID = 20180823000023 ;
UPDATE LOS_USER_ROLE SET ROLE_ID = 16 WHERE ID = 20180823000023 ;
COMMIT ;
-- b
racnk checker role : 101
SELECT * FROM LOS_USER_ROLE WHERE ROLE_ID = 101;

-- BM :104
SELECT * FROM LOS_USER_ROLE WHERE ROLE_ID = 104;
SELECT * FROM LOS_USER WHERE ID = 20180912000481 ;

-- BC - BM
--	12498CC18001566 	NGUYEN NGUYEN VAN X  	1320000023933 	18/12/2018 15:47:46	03/01/2019 17:01:15	At Branch Checker  	VTB.RLOS.01 	- 	- 

   SELECT * FROM LOS_CA WHERE app_ref_no = '12498CC18001585' ; -- ID  :  20181227002314
SELECT * FROM LOS_CIF_INDV WHERE CA_ID = 20181227002314 ;

SELECT * FROM LOS_CA WHERE app_ref_no = '12498CC18001361' ; 
SELECT * FROM LOS_CIF_INDV WHERE CA_ID = 20181227002314 ;


The application with Reference No : 12498CC23000032
has been submitted to : BRANCH CHECKER
26/05/2023 14:34:53

1	12498CC23000032 	DO VAN THUONG  	008088000033 	17/05/2023 11:08:48	26/05/2023 14:34:51	At Branch Checker  	Rlos17 	- 	- 	Process

The application with Reference No : 12498CC23000032
has been submitted to : Verifier 1



    SELECT * FROM LOS_CA WHERE app_ref_no = '12498CC23000032' ;
    
SELECT * FROM LOS_CIF_INDV WHERE CA_ID = 20230517003364 ; 


cREATED NEW PERSONAL LOAN
The application with Reference No : 12498PL23000001
has been submitted to : BRANCH CHECKER
26/05/2023 19:57:13

RLOS69 -> 13
	12498PL23000001 	DO VAN THUONG  	008088000033 	26/05/2023 19:48:25	26/05/2023 19:57:12	At Branch Checker  	Rlos17 	- 	- 

The application with Reference No : 12498PL23000001
has been submitted to : Verifier 1
26/05/2023 20:00:27

D:\Integro\Vietinbank\RLOS_newbranch\webapp\WEB-INF\classes\ilog\REQ_ORC_WF_FIRST_APPROVE-Config.xml
<field>
	<field-name>FieldCode</field-name>
	<database-column>'Deviate Flag'</database-column>
</field>
<field>
	<field-name>FieldValue</field-name>
	<database-column>(
		SELECT CASE WHEN COUNT(DEVIATE.ID) > 0 THEN 'Y' ELSE 'N' END
		FROM LOS_DEVIATION DEVIATE
		WHERE DEVIATE.CA_ID = $CA_ID$
		AND DEVIATE.STATUS = 'ACTIVE'
	)</database-column>
</field>


12498PL18000268 	DANG NGAN HA  	211660209 	21/09/2018 11:29:14	21/09/2018 11:34:49	At Branch Checker  	Hoang Linh 	- 	- 

SELECT CASE WHEN COUNT(DEVIATE.ID) > 0 THEN 'Y' ELSE 'N' END
		FROM LOS_DEVIATION DEVIATE
		WHERE DEVIATE.CA_ID =20230517003364 
		AND DEVIATE.STATUS = 'ACTIVE' ;
        
        
        SELECT * FROM LOS_DEVIATION ;

SELECT * FROM LOS_RULE_APPROVAL_DOA ;


The application with Reference No : 12498CC23000034
has been submitted to : BRANCH CHECKER
29/05/2023 11:16:52

1	12498CC23000034 	DO VAN THUONG  	008088000033 	29/05/2023 11:12:50	29/05/2023 11:16:50	At Branch Checker  	Rlos17 	- 	- 

SELECT * FROM LOS_CA WHERE app_ref_no = '12498CC23000034' ;   --20180921000669
SELECT * FROM LOS_RULE_APPROVAL_DOA WHERE CA_ID = 20180921000669 ;


SELECT * FROM LOS_RULE_APPROVAL_DOA WHERE authority_group_1 = 'COS' ;
--20190131001353	CA_ID (old) 20190131002611	AT1VR	COS	COS

UPDATE LOS_RULE_APPROVAL_DOA SET CA_ID = 20230529003367 WHERE ID = 20190131001353 ;
COMMIT ;

The application with Reference No : 12498CC23000034
has been submitted to : Verifier 1
29/05/2023 11:45:14


The application with Reference No : 12498PL23000002
has been submitted to : BRANCH CHECKER

The application with Reference No : 12498PL23000002
has been submitted to : Rlos17
29/05/2023 14:29:48

-- CREATED COS LINH123
SELECT * 
FROM LOS_BRMS_UNDERWRITING_RESULT RSLT
			        INNER JOIN 
			        (
			        	SELECT ID FROM LOS_BRMS_UNDERWRITING_PROD
			            WHERE CA_ID = 20230529003368
			            ORDER BY ID DESC
					) PROD 
					ON RSLT.UNDERWRITING_PROD_ID = PROD.ID
					WHERE RSLT.RULE_NAME = 'Decision_Matrix_Final'
		            AND ROWNUM = 1;
                    
                    
                    SELECT CASE WHEN COUNT(DEVIATE.ID) > 0 THEN 'Y' ELSE 'N' END
							FROM LOS_DEVIATION DEVIATE
							WHERE DEVIATE.CA_ID = 20230529003368
							AND DEVIATE.STATUS = 'ACTIVE' ;
                            
                            
                            SELECT * FROM LOS_USER WHERE LOGIN_NAME = 'RLOS13' ; 
                            
                            
                            SELECT * FROM COMMON_CODE_CATEGORY_ENTRY WHERE CATEGORY_CODE = 'APPROVE_AUTH'  AND ACTIVE_STATUS = 1 ;
                            
                            
                            
                            UPDATE COMMON_CODE_CATEGORY_ENTRY SET REF_ENTRY_CODE = '200,201,202,203' WHERE category_code = 'APPROVE_AUTH' AND entry_id = 20190129154939 ;
                            COMMIT ;

-- BC route to CO
<option value="20180911000360">VTB.RLOS.18 - 12498 - CN BA DINH - HOI SO</option>

The application with Reference No : 12498PL23000002
has been submitted to : Nguyen Thanh Minh
29/05/2023 15:18:36

                            
    SELECT * FROM LOS_USER WHERE SURNAME LIKE '%Nguyen Thanh Minh%'; 
    --20180919000537	MINHBM		788DD582A3DF792CCA72849528F395D5A1529AED	minhbm			Nguyen Thanh Minh

	UPDATE COMMON_CODE_CATEGORY_ENTRY SET REF_ENTRY_CODE = '200,201,202,203' WHERE category_code = 'APPROVE_AUTH' AND entry_id = 20190129154939 ;
                            COMMIT ;
                            
                            
    SELECT * FROM LOS_USER WHERE SURNAME LIKE '%Nguyen Thanh Minh%'; 
    --20180919000537	MINHBM		788DD582A3DF792CCA72849528F395D5A1529AED	minhbm			Nguyen Thanh Minh
    
    SELECT * FROM LOS_USER_ROLE WHERE USER_ID = 20180919000537 ;
    
    SELECT * FROM LOS_USER u JOIN LOS_USER_ROLE r ON r.USER_ID = u.id and r.role_id = 104 and u.SURNAME LIKE '%Nguyen Thanh Minh%'; 
	20180919000537	MINHBM





